<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Liga Robótica Neuquina</title>

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="progress-bar" id="progress"></div>
  
  <div class="frame-title" id="frameTitle">Sumo Robótico Controlado Infantil</div>

  <div class="frame-container">
    <iframe src="https://challonge.com/es/sumoroboticocontroladoinfantil/module" class="active" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/sumoroboticocontroladoadultos/module" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/futbolroboticoadulto/module" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/futbolroboticomenores/module" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/minisumocontroladoadulto/module" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/minisumoautonomoadulto/module" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/minisumoautonomoinfantil/module" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/sumoroboticoautonomoadulto/module" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/sumoroboticoautonomoinfantil/module" scrolling="auto" allowtransparency="true"></iframe>
    <iframe src="https://challonge.com/es/minisumocontroladoinfantil/module" scrolling="auto" allowtransparency="true"></iframe>
  </div>

  <button id="prev" class="nav-button">
    <i class="fa fa-arrow-circle-left" aria-hidden="true"></i>
  </button>
  <button id="next" class="nav-button">
    <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
  </button>

  <script>
    const iframes = document.querySelectorAll("iframe");
    const progress = document.getElementById("progress");
    const nextBtn = document.getElementById("next");
    const prevBtn = document.getElementById("prev");
    const frameTitle = document.getElementById("frameTitle");

    const titles = [
      "Sumo Robótico Controlado Infantil",
      "Sumo Robótico Controlado Adultos",
      "Fútbol Robótico Adultos",
      "Fútbol Robótico Menores",
      "Mini Sumo Controlado Adultos",
      "Mini Sumo Autónomo Adultos",
      "Mini Sumo Autónomo Infantil",
      "Sumo Robótico Autónomo Adultos",
      "Sumo Robótico Autónomo Infantil",
      "Mini Sumo Controlado Infantil"
    ];

    let current = 0;
    const intervalTime = 30000; // 30 segundos
    let autoChange;

    function showFrame(index) {
      iframes.forEach((frame, i) => {
        frame.classList.toggle("active", i === index);
      });
      frameTitle.textContent = titles[index];
      resetProgress();
    }

    function resetProgress() {
      progress.style.animation = "none";
      progress.offsetHeight; // forzar reflow
      progress.style.animation = `progress ${intervalTime}ms linear`;
    }

    function nextFrame() {
      current = (current + 1) % iframes.length;
      showFrame(current);
    }

    function prevFrame() {
      current = (current - 1 + iframes.length) % iframes.length;
      showFrame(current);
    }

    nextBtn.addEventListener("click", () => {
      nextFrame();
      restartAuto();
    });

    prevBtn.addEventListener("click", () => {
      prevFrame();
      restartAuto();
    });

    // Pausar autoplay al interactuar con cualquier iframe
    iframes.forEach(frame => {
      frame.addEventListener("pointerdown", () => {
        clearInterval(autoChange);
      });
    });

    function startAuto() {
      autoChange = setInterval(nextFrame, intervalTime);
      resetProgress();
    }

    function restartAuto() {
      clearInterval(autoChange);
      startAuto();
    }

    startAuto();
  </script>
</body>
</html>
